<div class="relative">
  @defer {
    <swiper-container #swiperContainer init="false" [id]="key">
      @for (item of items; track item.id) {
        <swiper-slide>
          <div class="slide-custom" (click)="selectPoster(item)" aria-hidden="true">
            <ui-card-poster
              [img]="item.poster_path"
              [title]="item.title"
              [description]="item.overview"
              [vote]="item.vote_average"
            ></ui-card-poster>
          </div>
        </swiper-slide>
      }
    </swiper-container>
  } @placeholder {
    <div class="flex relative z-10 gap-4 w-full items-center justify-between">
      @for (item of [1, 2, 3, 4, 5, 6]; track $index) {
        <div class="shadow-md max-w-44 min-w-52 min-h-40 my-4 flex flex-col gap-3">
          <div
            class="animate-pulse bg-[var(--gray-100-opacity-36)] h-[17rem] w-full rounded-xl"
          ></div>
          <div class="animate-pulse bg-[var(--gray-100-opacity-36)] h-8 w-full rounded-xl"></div>
        </div>
      }
    </div>
  }

  @if (items.length > 0) {
    <button
      pRipple
      [class]="
        'swiper-button-next-' +
        key +
        ' absolute top-1/2 translate-y-[-50%] right-4 z-10 bg-transparent border-none outline-none group cursor-pointer opacity-60'
      "
      aria-label="Next slide"
      aria-controls="swiper-key"
    >
      <svg
        width="40"
        height="40"
        viewBox="0 0 40 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M16.6667 11.6666L25 20L16.6667 28.3333L16.6667 11.6666Z"
          class="fill-white group-hover:fill-primary-ui"
        />
        <rect
          x="1.5"
          y="1.5"
          width="37"
          height="37"
          rx="6.5"
          class="fill-white group-hover:fill-primary-ui stroke-white group-hover:stroke-primary-ui"
          fill-opacity="0.16"
          stroke-width="3"
        />
      </svg>
    </button>
    <button
      pRipple
      [ngClass]="
        'swiper-button-prev-' +
        key +
        ' absolute top-1/2 translate-y-[-50%] left-0 z-10 bg-transparent border-none outline-none group cursor-pointer opacity-60'
      "
      aria-label="Previous slide"
      aria-controls="swiper-button-prev-swiper-key"
    >
      <svg
        width="40"
        height="40"
        viewBox="0 0 40 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M23.3333 28.3333L15 20L23.3333 11.6667L23.3333 28.3333Z"
          class="fill-white group-hover:fill-primary-ui"
        />
        <rect
          x="38.5"
          y="38.5"
          width="37"
          height="37"
          rx="6.5"
          transform="rotate(-180 38.5 38.5)"
          class="fill-white group-hover:fill-primary-ui stroke-white group-hover:stroke-primary-ui"
          fill-opacity="0.16"
          stroke-width="3"
        />
      </svg>
    </button>
  }
</div>
